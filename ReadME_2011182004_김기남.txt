-실행방법

Release ->DB연동X 
Release_DB-> DB연동 o

서버 Release파일(GameServer_TermProject.exe) 실행이후
클라이언트 Release(GameServer_TermProject.exe)파일 실행

클라이언트 실행시

서버 아이피와 이이디 입력후 시작

ODBC 
2011182004_kimkinam

--아이디 목록--
kinam
coffee
car
computer



--구조 설명--

스레드 들이 종료될때 까지 기다리고 있는 
메인 스레드1개

패킷들을 처리하고 주요 연산들을 하는 워커스레드4개

클라이언트들의 접속을 기다리고 접속을 시켜주는 액셉트 스레드 1개

주기적인 이벤트를 위한 타이머스레드 1개로

클라이언트들 데이터를 실시간으로 DB에 저장하기위한 DB스레드 1개

총 8개의 스레드로 구성되어 있습니다. 


프로그램이 시작되면 기본적인 네트워크 초기화 작업과 맵데이터 로딩작업을 실시하게 되고,

서버에 필요한 스레드들을 생성하게 됩니다.

액셉트 스레드에서는 클라이언트들의 접속 대기 및 접속시 받은 아이디를 데이터베이스 검색후 데이터베이스에 저장되있던

존과 위치를 찾은후에 초기값과 초기위치를 보내주고, 주변에 있는 플레이어들과 NPC들의 위치를 보내줍니다.


워커스레드에서는 클라이언트에서 오는 패킷들을 처리하고,

이동패킷이 오면 해당 클라이언트의 위치갱신 및 위치 브로드캐스팅과 시야처리를 합니다.

시야처리를 통해서 모든 플레이어 와 NPC가 아닌 근처에 있는 다른 플레이어 및 NPC들의 정보만 받게 됩니다.

타이머 스레드에서 PQCS를 통해 오는 NPC이동 이벤트를 처리해서

NPC들의 주기적인 무작위 이동 및 지형과의 충돌체크를 합니다.

타이머스레드를 통해 주기적으로 이벤트들을 PQCS를 사용하여 워커스레드에서 연산하게끔 합니다.

DB스레드에서는 3초마다 클라이언트들의 존과 위치 정보를 데이터베이스에 저장하게끔 합니다.



